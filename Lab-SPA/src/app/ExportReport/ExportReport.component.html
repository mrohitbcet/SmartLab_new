<div id="accordion">
    <div class="card">
        <div class="card-header"  id="headingOne" style="padding:0px;">
          <h5 class="mb-0">
            
            <button id="btnToggle" class="btn btn-link" data-toggle="collapse" data-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
              Export Report(s): Collapse/Expand 
              </button>
          </h5>
        </div>
    
        <div id="collapseOne" class="collapse show" aria-labelledby="headingOne" data-parent="#accordion" style="padding:0px;">
          <div class="card-body">
              <div class="row" >
                  <div class="col-sm-6" style="margin-bottom: 5px;">
                      <input type="text" placeholder="Enter Search Text" class="form-control pull-left" [(ngModel)]="SearchText">
              
                  </div>
                  </div>  
             
              <div class="row" >
                  <div class="col-sm-12">
                          <div class="table-responsive">
                          <table border="1" class="table">
                                  <thead class="thead-dark">
                                    <tr>
                                     <th>Action</th>
                                      <th scope="col">Lab No</th>
                                      <th scope="col">PatientName</th>
                                      <th scope="col">DoctorName</th>
                                      <th scope="col">Status</th>
                                      <th scope="col">CreatedDate</th>
                                     </tr>
                                  </thead>
                                  <tr *ngFor="let item of AllReportsInfo | filter:SearchText | paginate:{itemsPerPage:10, currentPage:PageNo};let i = index" [attr.groupId]="item.reportID">
                                      <td>
                                      <button title="Click to view test details" type="button" class="btn btn-link" (click)="GetReportDetailsInfo(item.reportID,item.status)">Details</button>
                                    </td>
                                       <td>
                                      #{{item.reportID}}
                                       </td>
                                     <td>{{item.patientName}}</td>
                                      <td>{{item.doctorName}}</td>
                                      <td *ngIf="item.status=='Completed'" >
                                       <span style="background-color:green;"> {{item.status}}</span>  
                                      </td>
                                      <td *ngIf="item.status!='Completed'">
                                          {{item.status}}
                                       </td>
                                      <td>{{item.createdDate | date: 'medium'}}</td>
                                  </tr>
                                  </table>
                              <pagination-controls (pageChange)="PageNo=$event"></pagination-controls>
                          </div>
                  </div>
                </div>
          </div>
        </div>
      </div>
</div>


<div id="div1">
    
 <div id="CnvasPrint" class="container-fluid">
        <!-- Report Download-->
        <div class="form-group">
                      
              <div *ngIf="DispayRptDet"  class="row" >
                      <div class="col-sm-12">
                  
                              <div   class="row">
                                  <div class="col-sm-3">
                                  </div>
                                  <div class="col-sm-6">
                                      <h1>{{cname}}</h1>
                                         <div>
                                          <span>
                                              <div [innerHTML]="caddress"></div>
                                            <!-- {{caddress}} -->
                                           
                                          <!-- Contact No: {{ccontact}}
                                           Email:{{cemail}} -->
                                          </span>
                                      </div>
                                    </div>
                                    <div class="col-sm-3">
                                     <i  *ngIf="isSubmitted" class="fa fa-download" (click)="onExportclick()"></i>
                                      <i style="padding-left:10px" *ngIf="isSubmitted" class="fa fa-inbox" (click)="SendReportHTMLToEmail()"></i>
                                        
                                      </div>
                                      <hr>
                              </div>
                              <span layout="row"><hr style="border:.5px solid;" /></span>
                                      <div   class="row">
                                        
                                        <div class="col-sm-12">
                                            <table *ngIf="DispayRptDet"   class="table table-sm" border="0"  >
                                          
                                                <tr>
                                                    <td>Patient's Name :</td>
                                                    <td>{{SelectedReport[0].patientName}}</td>
                                                    <td>Age/Gender:</td>
                                                    <td>{{GetAge(SelectedReport[0].patientDOB)}}/{{SelectedReport[0].patientGender}} <span style="padding-left:5px;">Lab No:</span> #{{CurrentReportID}}</td>
                                                  </tr>
                                                  <tr>
                                                    <td>Referred By Dr. :</td>
                                                    <td>{{SelectedReport[0].doctorName}}</td>
                                                    <td>Collection Date :</td>
                                                    <td>{{SelectedReport[0].createdDate | date: 'short'}}</td>
                                                  </tr>
                                                  <tr>
                                                      <td>Nature Of Specimen :</td>
                                                      <td>{{SelectedReport[0].specimen}}</td>
                                                      <td>Date of Report:</td>
                                                      <td>{{CurrentDate | date: 'short'}}</td>
                                                    </tr>
                                                <!-- <tr *ngFor="let item of SelectedReport;let i = index" [attr.reportID]="item.reportID">
                                                    <td>{{item.patientName}}</td>
                                                    <td>{{GetAge(item.patientDOB)}}/{{item.patientGender}}</td>
                                                    <td>{{item.doctorName}}</td>
                                                    <td>{{item.createdDate | date: 'short'}}</td>
                                                    <td>{{CurrentDate | date: 'short'}}</td>
                                                </tr> -->
                                                </table>
                                        </div>
                                       
                                      </div>
                                      <span layout="row"><hr style="border:.5px solid;" /></span>
      
                                      <div   class="row">
                                         
                                          <div class="col-sm-12" >
                                            <div *ngFor="let grpitem of ReportDataGroupWiseList">
                                             <h3 class="text-primary">{{grpitem.GroupName}}</h3> 
                                             <div   class="row">
                                                <div class="col-sm-4" >
                                               
                                             <div *ngIf="grpitem.GroupName =='URINE EXAMINATION' && DispayRptDet ">
                                              
                                                      <table   class="table table-sm">
                                                         
                                                            
                                                             <tr>
                                                                <td><b>PHYSICAL</b></td>
                                                                <td></td>
                                                             </tr>
                                                          
                                                          <tr *ngFor="let item of grpitem.ReportInfo">
                                                            <td  *ngIf="item.subId==1 && grpitem.GroupName =='URINE EXAMINATION'" >{{item.testName}}:</td>
                                                            <td *ngIf="item.subId==1 && grpitem.GroupName =='URINE EXAMINATION'" style="text-align:left;">{{item.result}}</td>
                                                          </tr>
                                                       
                                                               
                                                              <tr>
                                                                 <td><b>CHEMICAL</b></td>
                                                                 <td></td>
                                                              </tr>
                                                             
                                                          
                                                           <tr *ngFor="let item of grpitem.ReportInfo">
                                                               <td *ngIf="item.subId==2 && grpitem.GroupName =='URINE EXAMINATION'" >{{item.testName}}:</td>
                                                               <td *ngIf="item.subId==2 && grpitem.GroupName =='URINE EXAMINATION'" style="text-align:left;">{{item.result}}</td>
                                                             </tr>
                                                            
                                                                 
                                                                <tr>
                                                                   <td><b>MICROSCOPIC</b></td>
                                                                   <td></td>
                                                                </tr>
                                                            
                                                             <tr *ngFor="let item of grpitem.ReportInfo">
                                                                 <td *ngIf="item.subId==3 && grpitem.GroupName =='URINE EXAMINATION'" >{{item.testName}}:</td>
                                                                 <td *ngIf="item.subId==3 && grpitem.GroupName =='URINE EXAMINATION'" style="text-align:left;">{{item.result}}</td>
                                                               </tr>
                                                      </table>
                                               
                                           
                                            
                                          
                                             </div>
                                            </div>
                                          </div>
                                             <div *ngIf="grpitem.GroupName !='URINE EXAMINATION' " class="row"> 
                                               <div [ngClass]="{'col-sm-8':!grpitem.hideNormalvalue, 'col-sm-4': grpitem.hideNormalvalue}">
                                               
                                             <table *ngIf="DispayRptDet"  class="table table-sm">
                                       
                                              <thead>
                                                <tr>
                                                    <!-- <th>SN</th> -->
                                                  <!-- <th scope="col">Group Name</th> -->
                                                  <th scope="col" *ngIf="grpitem.GroupName =='Bacteria Isolated:Bcoli'">Drug</th>
                                                  <th scope="col" *ngIf="grpitem.GroupName !='Bacteria Isolated:Bcoli'">Test</th>
                                                <th  scope="col" *ngIf="grpitem.GroupName =='Bacteria Isolated:Bcoli'"> Sensitivity</th>
                                                <th  scope="col" *ngIf="grpitem.GroupName !='Bacteria Isolated:Bcoli'"> Result</th>
                                                <th  *ngIf="!grpitem.hideNormalvalue" scope="col">Units</th>
                                                  <th *ngIf="!grpitem.hideNormalvalue" scope="col">References</th>
                                                 </tr>
                                              </thead>
                                              <tr *ngFor="let item of grpitem.ReportInfo;let i = index" [attr.rptDetailsID]="item.rptDetailsID">
                                                  <td *ngIf="item.isHighlight" >
                                                     <span style="background-color:yellow; font-weight: bold;">{{item.testName}}</span>   
                                                      </td>
                                                      <td *ngIf="!item.isHighlight">{{item.testName}}</td>
                                                      <td>{{item.result}}</td>
                                                      <td *ngIf="!grpitem.hideNormalvalue" >{{item.unit}}</td>
                                                      <td *ngIf="!grpitem.hideNormalvalue" [innerHTML]="item.normalRange"> </td>
                                               </tr>
                                              </table>
                                              </div>  
                                              </div>  
                                            </div>
                                             
                                            </div>
                                           
                                      </div>

                                                
                                      <div layout="row">
                                          <div class="col-sm-12">
                                              <p style="text-align: center;"><b>***Report Completed***</b></p>
                                            </div>  
                                         
                                              
                                       </div>            
                                               
                        </div>
                        
                 </div>
                  
                     </div>
                  </div>
      <!--End  Report Download-->
      </div>